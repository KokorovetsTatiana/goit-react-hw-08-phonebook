{"version":3,"sources":["redux/actions.js","Pages/UserBar/UserBar.module.css","redux/authServise.js","redux/contactApiService.js","redux/selectors.js","Routes/Routes.jsx","Pages/UserBar/UserBar.jsx","App.js","redux/reducers.js","redux/store.js","index.js"],"names":["changeFilter","createAction","setToken","isOpen","isLogin","module","exports","authApi","createApi","reducerPath","baseQuery","fetchBaseQuery","baseUrl","prepareHeaders","headers","token","getState","set","tagTypes","keepUnusedDataFor","endpoints","builder","signup","mutation","query","body","url","method","invalidatesTags","login","logout","current","useSignupMutation","useLoginMutation","useLogoutMutation","useCurrentQuery","contactApi","getContact","providesTags","deleteContact","id","addContact","pacthContact","event","useGetContactQuery","useDeleteContactMutation","useAddContactMutation","usePacthContactMutation","getFilterValue","state","filter","isLoginUser","isLoggetIn","Private","children","props","useSelector","s","to","Public","restricted","isRedirect","UserBar","logoutUser","dispatch","useDispatch","data","postLogout","className","css","bar","link","userName","name","type","onClick","then","catch","e","toast","error","button","HomePage","lazy","Phonebook","LoginPage","SignupPage","App","fallback","LinearProgress","style","marginTop","exact","path","position","createReducer","_","action","payload","isOpenModal","authPersistConfig","key","storage","whitelist","rootReducer","combineReducers","reducer","persistedReducer","persistReducer","store","configureStore","devTools","process","middleware","getDefaultMiddleware","serializableCheck","ignoredActions","FLUSH","REHYDRATE","PAUSE","PERSIST","PURGE","REGISTER","concat","persistor","persistStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.28334888.chunk.js","sourcesContent":["import { createAction } from '@reduxjs/toolkit';\n\nexport const changeFilter = createAction('changeFilter');\nexport const setToken = createAction('setToken');\nexport const isOpen = createAction('isOpenModal');\nexport const isLogin = createAction('isLogin');\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bar\":\"UserBar_bar__2CLN-\",\"link\":\"UserBar_link__2r11X\",\"userName\":\"UserBar_userName__2cbF6\",\"button\":\"UserBar_button__1pPMl composes_button__5hfNW\"};","import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n\nexport const authApi = createApi({\n  reducerPath: 'authApi',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'https://connections-api.herokuapp.com/',\n    prepareHeaders: (headers, { getState }) => {\n      const token = getState()?.token;\n      if (token) {\n        headers.set('authorization', `Bearer ${token}`);\n      }\n      return headers;\n    },\n  }),\n  tagTypes: ['auth', 'current'],\n  keepUnusedDataFor: 0,\n  endpoints: builder => ({\n    signup: builder.mutation({\n      query: body => ({\n        url: 'users/signup',\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: ['auth'],\n    }),\n    login: builder.mutation({\n      query: body => ({\n        url: 'users/login',\n        method: 'POST',\n        body,\n      }),\n      invalidatesTags: ['auth'],\n    }),\n    logout: builder.mutation({\n      query: () => ({\n        url: 'users/logout',\n        method: 'POST',\n      }),\n      invalidatesTags: ['auth'],\n    }),\n    current: builder.query({\n      query: () => 'users/current',\n      invalidatesTags: ['current'],\n    }),\n  }),\n});\n\nexport const {\n  useSignupMutation,\n  useLoginMutation,\n  useLogoutMutation,\n  useCurrentQuery,\n} = authApi;\n","import { createApi, fetchBaseQuery } from '@reduxjs/toolkit/query/react';\n\nexport const contactApi = createApi({\n  reducerPath: 'contactApi',\n  baseQuery: fetchBaseQuery({\n    baseUrl: 'https://connections-api.herokuapp.com/',\n    prepareHeaders: (headers, { getState }) => {\n      const token = getState().token;\n      if (token) {\n        headers.set('authorization', `Bearer ${token}`);\n      }\n      return headers;\n    },\n  }),\n  tagTypes: ['contact'],\n  keepUnusedDataFor: 30,\n  endpoints: builder => ({\n    getContact: builder.query({\n      query: () => 'contacts',\n      providesTags: ['contact'],\n    }),\n    deleteContact: builder.mutation({\n      query(id) {\n        return {\n          url: `contacts/${id}`,\n          method: 'DELETE',\n        };\n      },\n      invalidatesTags: ['contact'],\n    }),\n    addContact: builder.mutation({\n      query(body) {\n        return {\n          url: 'contacts',\n          method: 'POST',\n          body,\n        };\n      },\n      invalidatesTags: ['contact'],\n    }),\n    pacthContact: builder.mutation({\n      query({ event, id }) {\n        return {\n          url: `contacts/${id}`,\n          method: 'PATCH',\n          body: event,\n        };\n      },\n      invalidatesTags: ['contact'],\n    }),\n  }),\n});\n\nexport const {\n  useGetContactQuery,\n  useDeleteContactMutation,\n  useAddContactMutation,\n  usePacthContactMutation,\n} = contactApi;\n","export const getFilterValue = state => state.filter;\nexport const isLoginUser = state => state.isLoggetIn;\n","import { Route, Redirect } from 'react-router';\r\nimport { isLoginUser } from 'redux/selectors';\r\nimport { useSelector } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport const Private = ({ children, ...props }) => {\r\n  const isLogin = useSelector(s => s.isLoggetIn);\r\n  return <Route {...props}>{isLogin ? children : <Redirect to=\"/\" />}</Route>;\r\n};\r\n\r\nexport const Public = ({ children, restricted = false, ...props }) => {\r\n  const isLogin = useSelector(isLoginUser);\r\n  const isRedirect = restricted && isLogin;\r\n\r\n  return (\r\n    <Route {...props}>\r\n      {isRedirect ? <Redirect to=\"/contacts\" /> : children}\r\n    </Route>\r\n  );\r\n};\r\n\r\nPrivate.propTypes = {\r\n  children: PropTypes.element.isRequired,\r\n  props: PropTypes.objectOf(PropTypes.object),\r\n};\r\n\r\nPublic.propTypes = {\r\n  children: PropTypes.element.isRequired,\r\n  props: PropTypes.objectOf(PropTypes.object),\r\n  restricted: PropTypes.bool,\r\n};","import { NavLink } from 'react-router-dom';\r\nimport css from './UserBar.module.css';\r\nimport { useCurrentQuery, useLogoutMutation } from 'redux/authServise';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setToken, isLogin } from 'redux/actions';\r\nimport { toast } from 'react-hot-toast';\r\nimport { isLoginUser } from 'redux/selectors';\r\n\r\nexport const UserBar = () => {\r\n  const [logoutUser] = useLogoutMutation();\r\n  const dispatch = useDispatch();\r\n  const isLoggetIn = useSelector(isLoginUser);\r\n  const { data } = useCurrentQuery();\r\n\r\n  function postLogout() {\r\n    dispatch(setToken(''));\r\n    dispatch(isLogin(false));\r\n  }\r\n\r\n  function logoutHandler() {\r\n    logoutUser()\r\n      .then(postLogout)\r\n      .catch(e => toast.error('something went wrong'));\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className={css.bar}>\r\n        \r\n        <NavLink to=\"/\" className={css.link}>\r\n          Home\r\n        </NavLink>\r\n        {isLoggetIn && (\r\n          <NavLink to=\"/contacts\" className={css.link}>\r\n            Contacts\r\n          </NavLink>\r\n        )}\r\n        {isLoggetIn && (\r\n          <>\r\n            <p className={css.userName}>{data?.name}</p>\r\n            <button\r\n              type=\"button\"\r\n              onClick={logoutHandler}\r\n              className={css.button}\r\n            >\r\n              Logout\r\n            </button>\r\n          </>\r\n        )}\r\n\r\n          {!isLoggetIn && (\r\n          <>\r\n            <NavLink to=\"/signup\" className={css.link}>\r\n              Signup\r\n            </NavLink>\r\n            <NavLink to=\"/login\" className={css.link}>\r\n              Login\r\n            </NavLink>\r\n          </>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n};","//routes\nimport * as Routes from 'Routes/Routes';\n//react-components\nimport { Switch, Redirect } from 'react-router-dom';\nimport { Suspense, lazy } from 'react';\n//components\nimport { LinearProgress } from '@material-ui/core';\nimport { Toaster } from 'react-hot-toast';\nimport { UserBar } from 'Pages/UserBar/UserBar';\nconst HomePage = lazy(() => import('Pages/HomePage/HomePage'));\nconst Phonebook = lazy(() => import('Pages/PhonebookPage/Phonebook'));\nconst LoginPage = lazy(() => import('Pages/LoginPage/LoginPage'));\nconst SignupPage = lazy(() => import('Pages/SignupPage/SignupPage'));\n\nconst App = () => {\n  return (\n    <>\n      <UserBar />\n      <Switch>\n        <Suspense fallback={<LinearProgress style={{ marginTop: '60px' }} />}>\n          <Routes.Public exact path=\"/\">\n            <HomePage />\n          </Routes.Public>\n          <Routes.Private path=\"/contacts\">\n            <Phonebook />\n          </Routes.Private>\n          <Routes.Public path=\"/login\" restricted>\n            <LoginPage />\n          </Routes.Public>\n          <Routes.Public path=\"/signup\" restricted>\n            <SignupPage />\n          </Routes.Public>\n          <Redirect to=\"/\" />\n        </Suspense>\n      </Switch>\n      <Toaster position=\"top-right\" />\n    </>\n  );\n};\n\nexport default App;\n","import { changeFilter, setToken, isOpen, isLogin } from 'redux/actions';\nimport { createReducer } from '@reduxjs/toolkit';\n\nexport const filter = createReducer('', {\n  [changeFilter]: (_, action) => action.payload,\n});\n\nexport const token = createReducer('', {\n  [setToken]: (_, action) => action.payload,\n});\n\nexport const isOpenModal = createReducer(false, {\n  [isOpen]: (state, _) => !state,\n});\n\nexport const isLoggetIn = createReducer(false, {\n  [isLogin]: (_, action) => action.payload,\n});\n","import { configureStore } from '@reduxjs/toolkit';\nimport { contactApi } from 'redux/contactApiService';\nimport { authApi } from './authServise';\nimport { filter, token, isOpenModal, isLoggetIn } from 'redux/reducers';\nimport { combineReducers } from '@reduxjs/toolkit';\nimport {\n  persistStore,\n  persistReducer,\n  FLUSH,\n  REHYDRATE,\n  PAUSE,\n  PERSIST,\n  PURGE,\n  REGISTER,\n} from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\n\nconst authPersistConfig = {\n  key: 'authData',\n  storage,\n  whitelist: ['token', 'isLoggetIn'],\n};\n\nconst rootReducer = combineReducers({\n  isLoggetIn,\n  isOpenModal,\n  filter,\n  token,\n  [contactApi.reducerPath]: contactApi.reducer,\n  [authApi.reducerPath]: authApi.reducer,\n});\n\nconst persistedReducer = persistReducer(authPersistConfig, rootReducer);\n\nconst store = configureStore({\n  reducer: persistedReducer,\n  devTools: process.env.NODE_ENV === 'development',\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      serializableCheck: {\n        ignoredActions: [FLUSH, REHYDRATE, PAUSE, PERSIST, PURGE, REGISTER],\n      },\n    })\n      .concat(contactApi.middleware)\n      .concat(authApi.middleware),\n});\n\nconst persistor = persistStore(store);\nexport { store, persistor };\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { BrowserRouter } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { PersistGate } from 'redux-persist/integration/react';\nimport { store, persistor } from 'redux/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <PersistGate persistor={persistor}>\n        <BrowserRouter>\n          <App />\n        </BrowserRouter>\n      </PersistGate>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}